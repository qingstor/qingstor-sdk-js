// +-------------------------------------------------------------------------
// | Copyright (C) 2016 Yunify, Inc.
// +-------------------------------------------------------------------------
// | Licensed under the Apache License, Version 2.0 (the "License");
// | you may not use this work except in compliance with the License.
// | You may obtain a copy of the License in the LICENSE file, or at:
// |
// | http://www.apache.org/licenses/LICENSE-2.0
// |
// | Unless required by applicable law or agreed to in writing, software
// | distributed under the License is distributed on an "AS IS" BASIS,
// | WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// | See the License for the specific language governing permissions and
// | limitations under the License.
// +-------------------------------------------------------------------------

import { fixedEncodeURIComponent, buildUri, isFunction, filterUnsafeHeaders } from './utils';

const keys = `test_object
ä¸­æ–‡æµ‹è¯•
ç”°ä¸­ã•ã‚“ã«ã‚ã’ã¦ä¸‹ã•ã„
ãƒ‘ãƒ¼ãƒ†ã‚£ãƒ¼ã¸è¡Œã‹ãªã„ã‹
å’Œè£½æ¼¢èª
ì‚¬íšŒê³¼í•™ì› ì–´í•™ì—°êµ¬ì†Œ
ì°¦ì°¨ë¥¼ íƒ€ê³  ì˜¨ í²ì‹œë§¨ê³¼ ì‘›ë‹¤ë¦¬ ë˜ ë°©ê°í•˜
ç¤¾æœƒç§‘å­¸é™¢èªå­¸ç ”ç©¶æ‰€
ìš¸ë€ë°”í† ë¥´
ğ œğ œ±ğ ¹ğ ±“ğ ±¸ğ ²–ğ ³
,./;'[]\-=
<>?:"{}\|_+
!@#$%^&*()\`~
'
"
''
""
'"'
"''''"'"
"'"'"''''"
ğŸ˜
ğŸ‘©ğŸ½
ğŸ‘¾ ğŸ™‡ ğŸ’ ğŸ™… ğŸ™† ğŸ™‹ ğŸ™ ğŸ™
ğŸµ ğŸ™ˆ ğŸ™‰ ğŸ™Š
âœ‹ğŸ¿ ğŸ’ªğŸ¿ ğŸ‘ğŸ¿ ğŸ™ŒğŸ¿ ğŸ‘ğŸ¿ ğŸ™ğŸ¿
ğŸš¾ ğŸ†’ ğŸ†“ ğŸ†• ğŸ†– ğŸ†— ğŸ†™ ğŸ§
0ï¸âƒ£ 1ï¸âƒ£ 2ï¸âƒ£ 3ï¸âƒ£ 4ï¸âƒ£ 5ï¸âƒ£ 6ï¸âƒ£ 7ï¸âƒ£ 8ï¸âƒ£ 9ï¸âƒ£ ğŸ”Ÿ
â¤ï¸ ğŸ’” ğŸ’Œ ğŸ’• ğŸ’ ğŸ’“ ğŸ’— ğŸ’– ğŸ’˜ ğŸ’ ğŸ’Ÿ ğŸ’œ ğŸ’› ğŸ’š ğŸ’™
ï¼‘ï¼’ï¼“
Ù¡Ù¢Ù£
Ø«Ù… Ù†ÙØ³ Ø³Ù‚Ø·Øª ÙˆØ¨Ø§Ù„ØªØ­Ø¯ÙŠØ¯ØŒ/, Ø¬Ø²ÙŠØ±ØªÙŠ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø£Ù† Ø¯Ù†Ùˆ. Ø¥Ø° Ù‡Ù†Ø§ØŸ Ø§Ù„Ø³ØªØ§Ø± ÙˆØªÙ†ØµÙŠØ¨ ÙƒØ§Ù†. Ø£Ù‡Ù‘Ù„ Ø§ÙŠØ·Ø§Ù„ÙŠØ§ØŒ/ Ø¨Ø±ÙŠØ·Ø§Ù†ÙŠØ§-ÙØ±Ù†Ø³Ø§ Ù‚Ø¯ Ø£Ø®Ø°. Ø³Ù„ÙŠÙ…Ø§Ù†ØŒ Ø¥ØªÙØ§Ù‚ÙŠØ© Ø¨ÙŠÙ† Ù…Ø§/, ÙŠØ°ÙƒØ± Ø§Ù„Ø­Ø¯ÙˆØ¯ Ø£ÙŠ Ø¨Ø¹Ø¯, Ù…Ø¹Ø§Ù…Ù„Ø© Ø¨ÙˆÙ„Ù†Ø¯Ø§ØŒ Ø§Ù„Ø¥Ø·Ù„Ø§Ù‚ Ø¹Ù„ Ø¥ÙŠÙˆ.
×‘Ö°Ö¼×¨Öµ××©Ö´××™×ª, ×‘Ö¸Ö¼×¨Ö¸× ×Ö±×œÖ¹×”Ö´×™×, ×Öµ×ª ×”Ö·×©Ö¸Ö¼××Ö·×™Ö´×, ×•Ö°×Öµ×ª ×”Ö¸×Ö¸×¨Ö¶×¥
×”Ö¸×™Ö°×ªÖ¸×”testØ§Ù„ØµÙØ­Ø§Øª Ø§Ù„ØªÙ‘Ø­ÙˆÙ„
ï·½
ï·º
Ù…ÙÙ†ÙØ§Ù‚ÙØ´ÙØ©Ù Ø³ÙØ¨ÙÙ„Ù Ø§ÙØ³Ù’ØªÙØ®Ù’Ø¯ÙØ§Ù…Ù Ø§Ù„Ù„Ù‘ÙØºÙØ©Ù ÙÙÙŠ Ø§Ù„Ù†Ù‘ÙØ¸ÙÙ…Ù Ø§Ù„Ù’Ù‚ÙØ§Ø¦ÙÙ…ÙØ©Ù ÙˆÙÙÙÙŠÙ… ÙŠÙØ®ÙØµÙ‘Ù Ø§Ù„ØªÙ‘ÙØ·Ù’Ø¨ÙÙŠÙ‚ÙØ§ØªÙ Ø§Ù„Ù’Ø­Ø§Ø³ÙÙˆØ¨ÙÙŠÙ‘ÙØ©ÙØŒ`;

test('fixedEncodeURIComponent', () => {
  keys.split('\n').forEach((key) => {
    expect(fixedEncodeURIComponent(key)).toMatchSnapshot();
  });
});

test('buildUri', () => {
  expect(buildUri('https://qingstor.com', '/test_bucet', { foo: 'bar' })).toMatchSnapshot();
  expect(buildUri('https://qingstor.com', '/test_bucet?cors', { foo: 'bar' })).toMatchSnapshot();
});

test('isFunction', () => {
  expect(isFunction(function () {})).toBe(true);
  expect(isFunction({ foo: 'bar' })).toBe(false);
});

test('filterUnsafeHeaders', () => {
  expect(
    filterUnsafeHeaders({
      host: 'qingstor.com',
      'x-qs-date': 'Fri, 01 Nov 2019 07:40:08 GMT',
      'content-length': 11,
      'content-type': 'image/jpeg',
      'x-qs-z': 'test-z',
      'x-qs-a': 'test-a',
      'x-qs-a-abc': 'test-abc',
      'user-agent': 'userAgent',
    })
  ).toMatchSnapshot();
});
